{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { inject } from '@angular/core';\nimport { TableModule } from 'primeng/table';\nimport { AlertsStoreService } from '../../services/alerts-store.service';\nimport { map } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport class RealtimeDemoComponent {\n  store = inject(AlertsStoreService);\n  sub;\n  // tabla derivada con marca \"recent\" para resaltar filas cambiadas en los últimos 5s\n  rows = [];\n  ngOnInit() {\n    this.sub = this.store.rows$.pipe(map(rows => rows.map(r => {\n      const recent = Date.now() - r.updatedAt < 5000;\n      const cambio = (r.prev ?? r.valor) !== r.valor ? r.valor - (r.prev ?? r.valor) : 0;\n      return {\n        ...r,\n        recent,\n        cambio\n      };\n    }))).subscribe(rows => this.rows = rows);\n  }\n  ngOnDestroy() {\n    this.sub?.unsubscribe();\n  }\n  rowStyleClass = rowData => rowData.recent ? 'row-alert' : '';\n  static ɵfac = function RealtimeDemoComponent_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || RealtimeDemoComponent)();\n  };\n  static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RealtimeDemoComponent,\n    selectors: [[\"app-realtime-demo\"]],\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 2,\n    vars: 0,\n    template: function RealtimeDemoComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p\");\n        i0.ɵɵtext(1, \"realtime-demo works!\");\n        i0.ɵɵelementEnd();\n      }\n    },\n    dependencies: [CommonModule, TableModule],\n    styles: [\"(()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  {// webpackBootstrap \\\"use strict\\\";})()[_ngcontent-%COMP%] ;{%BLOCK%}\"]\n  });\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}