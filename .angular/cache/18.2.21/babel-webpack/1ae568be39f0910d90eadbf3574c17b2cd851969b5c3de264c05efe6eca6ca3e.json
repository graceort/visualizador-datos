{"ast":null,"code":"import { DOCUMENT, isPlatformServer } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { Injectable, inject, PLATFORM_ID, ElementRef, Injector, ChangeDetectorRef, Renderer2, Directive, Input } from '@angular/core';\nimport { Theme, ThemeService } from '@primeuix/styled';\nimport { uuid, getKeyValue } from '@primeuix/utils';\nimport { BaseStyle, Base } from 'primeng/base';\nimport { PrimeNG } from 'primeng/config';\nclass BaseComponentStyle extends BaseStyle {\n  name = 'common';\n  static ɵfac = /*@__PURE__*/(() => {\n    let ɵBaseComponentStyle_BaseFactory;\n    return function BaseComponentStyle_Factory(__ngFactoryType__) {\n      return (ɵBaseComponentStyle_BaseFactory || (ɵBaseComponentStyle_BaseFactory = i0.ɵɵgetInheritedFactory(BaseComponentStyle)))(__ngFactoryType__ || BaseComponentStyle);\n    };\n  })();\n  static ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: BaseComponentStyle,\n    factory: BaseComponentStyle.ɵfac,\n    providedIn: 'root'\n  });\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(BaseComponentStyle, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], null, null);\n})();\nclass BaseComponent {\n  document = inject(DOCUMENT);\n  platformId = inject(PLATFORM_ID);\n  el = inject(ElementRef);\n  injector = inject(Injector);\n  cd = inject(ChangeDetectorRef);\n  renderer = inject(Renderer2);\n  config = inject(PrimeNG);\n  baseComponentStyle = inject(BaseComponentStyle);\n  baseStyle = inject(BaseStyle);\n  scopedStyleEl;\n  rootEl;\n  dt;\n  get styleOptions() {\n    return {\n      nonce: this.config?.csp().nonce\n    };\n  }\n  get _name() {\n    return this.constructor.name.replace(/^_/, '').toLowerCase();\n  }\n  get componentStyle() {\n    return this['_componentStyle'];\n  }\n  attrSelector = uuid('pc');\n  _getHostInstance(instance) {\n    if (instance) {\n      return instance ? this['hostName'] ? instance['name'] === this['hostName'] ? instance : this._getHostInstance(instance.parentInstance) : instance.parentInstance : undefined;\n    }\n  }\n  _getOptionValue(options, key = '', params = {}) {\n    return getKeyValue(options, key, params);\n  }\n  ngOnInit() {\n    if (this.document) {\n      this._loadStyles();\n    }\n  }\n  ngAfterViewInit() {\n    this.rootEl = this.el?.nativeElement;\n    if (this.rootEl) {\n      this.rootEl?.setAttribute(this.attrSelector, '');\n    }\n  }\n  ngOnChanges(changes) {\n    if (this.document && !isPlatformServer(this.platformId)) {\n      const {\n        dt\n      } = changes;\n      if (dt && dt.currentValue) {\n        this._loadScopedThemeStyles(dt.currentValue);\n        this._themeChangeListener(() => this._loadScopedThemeStyles(dt.currentValue));\n      }\n    }\n  }\n  ngOnDestroy() {\n    this._unloadScopedThemeStyles();\n  }\n  _loadStyles() {\n    const _load = () => {\n      if (!Base.isStyleNameLoaded('base')) {\n        this.baseStyle.loadCSS(this.styleOptions);\n        Base.setLoadedStyleName('base');\n      }\n      this._loadThemeStyles();\n      // @todo update config.theme()\n    };\n    _load();\n    this._themeChangeListener(() => _load());\n  }\n  _loadCoreStyles() {\n    if (!Base.isStyleNameLoaded('base') && this._name) {\n      this.baseComponentStyle.loadCSS(this.styleOptions);\n      this.componentStyle && this.componentStyle?.loadCSS(this.styleOptions);\n      Base.setLoadedStyleName(this.componentStyle?.name);\n    }\n  }\n  _loadThemeStyles() {\n    // common\n    if (!Theme.isStyleNameLoaded('common')) {\n      const {\n        primitive,\n        semantic,\n        global,\n        style\n      } = this.componentStyle?.getCommonTheme?.() || {};\n      this.baseStyle.load(primitive?.css, {\n        name: 'primitive-variables',\n        ...this.styleOptions\n      });\n      this.baseStyle.load(semantic?.css, {\n        name: 'semantic-variables',\n        ...this.styleOptions\n      });\n      this.baseStyle.load(global?.css, {\n        name: 'global-variables',\n        ...this.styleOptions\n      });\n      this.baseStyle.loadTheme({\n        name: 'global-style',\n        ...this.styleOptions\n      }, style);\n      Theme.setLoadedStyleName('common');\n    }\n    // component\n    if (!Theme.isStyleNameLoaded(this.componentStyle?.name) && this.componentStyle?.name) {\n      const {\n        css,\n        style\n      } = this.componentStyle?.getComponentTheme?.() || {};\n      this.componentStyle?.load(css, {\n        name: `${this.componentStyle?.name}-variables`,\n        ...this.styleOptions\n      });\n      this.componentStyle?.loadTheme({\n        name: `${this.componentStyle?.name}-style`,\n        ...this.styleOptions\n      }, style);\n      Theme.setLoadedStyleName(this.componentStyle?.name);\n    }\n    // layer order\n    if (!Theme.isStyleNameLoaded('layer-order')) {\n      const layerOrder = this.componentStyle?.getLayerOrderThemeCSS?.();\n      this.baseStyle.load(layerOrder, {\n        name: 'layer-order',\n        first: true,\n        ...this.styleOptions\n      });\n      Theme.setLoadedStyleName('layer-order');\n    }\n    if (this.dt) {\n      this._loadScopedThemeStyles(this.dt);\n      this._themeChangeListener(() => this._loadScopedThemeStyles(this.dt));\n    }\n  }\n  _loadScopedThemeStyles(preset) {\n    const {\n      css\n    } = this.componentStyle?.getPresetTheme?.(preset, `[${this.attrSelector}]`) || {};\n    const scopedStyle = this.componentStyle?.load(css, {\n      name: `${this.attrSelector}-${this.componentStyle?.name}`,\n      ...this.styleOptions\n    });\n    this.scopedStyleEl = scopedStyle?.el;\n  }\n  _unloadScopedThemeStyles() {\n    this.scopedStyleEl?.remove();\n  }\n  _themeChangeListener(callback = () => {}) {\n    Base.clearLoadedStyleNames();\n    ThemeService.on('theme:change', callback);\n  }\n  cx(arg, rest) {\n    const classes = this.parent ? this.parent.componentStyle?.classes?.[arg] : this.componentStyle?.classes?.[arg];\n    if (typeof classes === 'function') {\n      return classes({\n        instance: this\n      });\n    }\n    return typeof classes === 'string' ? classes : arg;\n  }\n  sx(arg) {\n    const styles = this.componentStyle?.inlineStyles?.[arg];\n    if (typeof styles === 'function') {\n      return styles({\n        instance: this\n      });\n    }\n    if (typeof styles === 'string') {\n      return styles;\n    } else {\n      return {\n        ...styles\n      };\n    }\n  }\n  // cx(key = '', params = {}) {\n  //     const classes = this.parent ? this.parent.componentStyle?.classes : this.componentStyle?.classes;\n  //     return this._getOptionValue(classes({ instance: this._getHostInstance(this) }), key, { ...params });\n  // }\n  get parent() {\n    return this['parentInstance'];\n  }\n  static ɵfac = function BaseComponent_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || BaseComponent)();\n  };\n  static ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n    type: BaseComponent,\n    inputs: {\n      dt: \"dt\"\n    },\n    standalone: true,\n    features: [i0.ɵɵProvidersFeature([BaseComponentStyle, BaseStyle]), i0.ɵɵNgOnChangesFeature]\n  });\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(BaseComponent, [{\n    type: Directive,\n    args: [{\n      standalone: true,\n      providers: [BaseComponentStyle, BaseStyle]\n    }]\n  }], null, {\n    dt: [{\n      type: Input\n    }]\n  });\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { BaseComponent, BaseComponentStyle };\n//# sourceMappingURL=primeng-basecomponent.mjs.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}